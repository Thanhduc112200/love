<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Qu√† t·∫∑ng em y√™u</title>
<style>
  body {
    background: linear-gradient(to bottom, #001028, #0c2b10);
    height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    align-items: center;
    overflow: hidden;
    position: relative;
    font-family: 'Brush Script MT', cursive;
  }

  @keyframes fadeChar { from {opacity:0; transform: translateY(10px);} to {opacity:1; transform: translateY(0);} }
  @keyframes glow { 0%,100%{text-shadow:0 0 10px #fff8c9,0 0 20px #ffb478,0 0 30px #ff7850;} 50%{text-shadow:0 0 20px #fff,0 0 40px #ffc896,0 0 60px #ff9664;} }
  @keyframes float {0%,100%{transform:translateY(0);}50%{transform:translateY(-10px);}}

  .text { position: absolute; bottom: 440px; text-align: center; color: #fff8c9; opacity: 1; }
  .text p { margin: 8px 0; white-space: nowrap; }
  .text p:first-child { font-size: 30px; }
  .text p:last-child { font-size: 38px; color: #ffeb9a; }
  .text span { display: inline-block; margin-right: 2px; }
  .text.glow p { animation: glow 2s ease-in-out infinite, float 4s ease-in-out infinite; }

  .scene { position: relative; width: 180px; height: 360px; animation: appear 1s ease-out; }
  .stem { position: absolute; bottom: 0; left: 50%; width: 8px; height: 200px; background: linear-gradient(to bottom, #188a34, #0a501b); border-radius:10px; transform:translateX(-50%); box-shadow: inset -2px -4px 10px rgba(0,0,0,0.25); z-index:1; }
  .leaf { position: absolute; width: 70px; height: 45px; background: radial-gradient(ellipse at center,#2db64a,#127d2e 70%); border-radius:100% 0 100% 0 / 90% 0 100% 0; opacity:0; transform:scale(0); z-index:0; animation: leafGrow 2s ease-out forwards; }
  .leaf.left { bottom:85px; right:50%; transform-origin:right center; transform: rotate(-35deg) scale(0); animation-delay:1s;}
  .leaf.right { bottom:60px; left:50%; transform-origin:left center; transform: rotate(215deg) scale(0); animation-delay:1.3s;}
  @keyframes leafGrow { 0%{opacity:0;transform:scale(0);}100%{opacity:1;transform:scale(1) rotate(var(--angle));} }

  .flower { position:absolute; bottom:180px; left:50%; width:130px; height:130px; transform:translateX(-50%) scale(0.85); z-index:2; cursor:pointer; }
  .petal-wrap { position:absolute; top:50%; left:50%; transform-origin:center center; }
  .petal { position:absolute; left:50%; top:50%; width:45px; height:95px; background: radial-gradient(ellipse at top,#ffe6ec 0%,#ff4d8a 70%); border-radius:50% 50% 45% 45%; transform:translate(-50%,-100%) scale(0); transform-origin:50% 100%; opacity:0; box-shadow: inset -4px -16px 25px rgba(255,255,255,0.25); animation:petalBloom 2.2s ease-out forwards; }
  @keyframes petalBloom { 0%{transform:translate(-50%,-100%) scale(0); opacity:0;}80%{transform:translate(-50%,-115%) scale(1.05); opacity:1;}100%{transform:translate(-50%,-115%) scale(1); opacity:1;} }

  .center { position:absolute; top:50%; left:50%; width:35px; height:35px; transform:translate(-50%,-50%) scale(0); background:radial-gradient(circle at 30% 30%,#fff8b0,#ffcc33 70%); border-radius:50%; box-shadow:0 0 15px rgba(255,200,60,0.6); z-index:10; animation:centerAppear 1.5s ease-out 1.3s forwards; }
  @keyframes centerAppear {0%{transform:translate(-50%,-50%) scale(0);opacity:0;}100%{transform:translate(-50%,-50%) scale(1);opacity:1;} }

  .letter { display:none; position: fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:#fff8e0; color:#333; padding:20px; max-width:300px; border-radius:10px; box-shadow:0 0 20px rgba(0,0,0,0.5); z-index:50; text-align:center; }
  .letter button { margin-top:10px; padding:5px 10px; border:none; background:#ffcc33; border-radius:5px; cursor:pointer; }

  .kiss { position:absolute; font-size:24px; color:#ff4d8a; user-select:none; animation-timing-function: ease-out; }
  @keyframes kissFlyUp {
    0% { transform: translate(0,0) scale(1); opacity:1; }
    100% { transform: translate(var(--xShift), var(--yShift)) scale(1.5); opacity:0; }
  }

  /* B·∫£ng c·∫ßu h√¥n v·ªõi nh·∫´n CSS 3D l·∫•p l√°nh */
  .proposal {
    display:none;
    position:fixed;
    top:50%; left:50%;
    transform:translate(-50%,-50%);
    background:#fff8e0;
    padding:20px;
    border-radius:15px;
    text-align:center;
    box-shadow:0 0 20px rgba(0,0,0,0.5);
    z-index:100;
    max-width:300px;
  }
  .ring {
    width: 120px;
    height: 120px;
    margin: 0 auto 15px;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, #fff1a8, #ffd233 70%);
    border: 6px solid #ffcc33;
    box-shadow: inset -4px -4px 10px rgba(255, 255, 255, 0.5),
                inset 4px 4px 10px rgba(0, 0, 0, 0.2),
                0 4px 15px rgba(0,0,0,0.3);
    position: relative;
    animation: ringGlow 2s infinite alternate;
  }
  @keyframes ringGlow {
    0% { box-shadow: inset -4px -4px 10px rgba(255,255,255,0.5),
                     inset 4px 4px 10px rgba(0,0,0,0.2),
                     0 4px 15px rgba(0,0,0,0.3); }
    100% { box-shadow: inset -4px -4px 12px rgba(255,255,255,0.7),
                     inset 4px 4px 12px rgba(0,0,0,0.3),
                     0 6px 18px rgba(0,0,0,0.4); }
  }
  .diamond {
    width: 0;
    height: 0;
    border-left: 25px solid transparent;
    border-right: 25px solid transparent;
    border-bottom: 40px solid #aee2ff;
    position: absolute;
    top: -42px;
    left: 50%;
    transform: translateX(-50%) rotate(45deg);
    box-shadow: 0 0 15px rgba(175, 238, 255, 0.7),
                0 0 25px rgba(175, 238, 255, 0.4) inset;
    animation: diamondShine 1.5s infinite alternate;
  }
  @keyframes diamondShine {
    0% { box-shadow: 0 0 10px rgba(175, 238, 255, 0.7),
                     0 0 20px rgba(175, 238, 255, 0.4) inset; }
    50% { box-shadow: 0 0 18px rgba(175, 238, 255, 1),
                     0 0 30px rgba(175, 238, 255, 0.6) inset; }
    100% { box-shadow: 0 0 12px rgba(175, 238, 255, 0.8),
                     0 0 25px rgba(175, 238, 255, 0.5) inset; }
  }
  .diamond::before {
    content: '';
    position: absolute;
    top: -35px;
    left: -12px;
    width: 0;
    height: 0;
    border-left: 12px solid transparent;
    border-right: 12px solid transparent;
    border-bottom: 20px solid rgba(255,255,255,0.6);
    transform: rotate(-45deg);
  }

  /* N√∫t ƒê·ªìng √Ω / Kh√¥ng ƒë·ªìng √Ω */
  .proposal button {
    padding: 8px 15px;
    margin: 8px;
    border: none;
    border-radius: 5px;
    font-size: 16px;
    cursor: pointer;
    transition: transform 0.2s;
  }
  .proposal button:hover { transform: scale(1.1); }
  .proposal .yes { background-color: #ff4d8a; color: #fff; }
  .proposal .no { background-color: #ccc; color: #333; }
  #responseMessage { margin-top:10px; font-size:18px; color:#ff4d8a; min-height:24px; }
</style>
</head>
<body>

<div class="text">
  <p>üå∏ Ch√∫c em b√© y√™u c·ªßa anh c√≥ ng√†y 20 th√°ng 10 th·∫≠t h·∫°nh ph√∫c üå∏</p>
  <p>üíñ Anh y√™u em r·∫•t nhi·ªÅu üíñ</p>
</div>

<div class="scene">
  <div class="stem"></div>
  <div class="leaf left"></div>
  <div class="leaf right"></div>
  <div class="flower"><div class="center"></div></div>
</div>

<div class="letter" id="letter">
  <h2>Th∆∞ t√¨nh</h2>
  <p>Em y√™u, anh vi·∫øt nh·ªØng d√≤ng n√†y ƒë·ªÉ n√≥i r·∫±ng anh r·∫•t th∆∞∆°ng em. H√£y lu√¥n h·∫°nh ph√∫c v√† nh·ªõ r·∫±ng anh lu√¥n b√™n em.</p>
  <button id="closeLetter">ƒê√≥ng</button>
</div>

<!-- B·∫£ng c·∫ßu h√¥n v·ªõi nh·∫´n CSS 3D l·∫•p l√°nh v√† n√∫t -->
<div class="proposal" id="proposal">
  <div class="ring">
    <div class="diamond"></div>
  </div>
  <p>Ch·ªù anh nh√©, anh s·∫Ω c∆∞·ªõi em üíç</p>
  <div>
    <button class="yes" id="agreeBtn">ƒê·ªìng √Ω</button>
    <button class="no" id="disagreeBtn">Kh√¥ng ƒë·ªìng √Ω</button>
  </div>
  <p id="responseMessage"></p>
</div>

<script>
const flower=document.querySelector('.flower');
const petalCount=10;
const text=document.querySelector('.text');
const lines=text.querySelectorAll('p');
const letter=document.getElementById('letter');
const closeBtn=document.getElementById('closeLetter');
const proposal=document.getElementById('proposal');
const agreeBtn = document.getElementById('agreeBtn');
const disagreeBtn = document.getElementById('disagreeBtn');
const responseMessage = document.getElementById('responseMessage');

// T·∫°o c√°nh hoa
function createPetals(){
  for(let i=0;i<petalCount;i++){
    const wrap=document.createElement('div');
    wrap.classList.add('petal-wrap');
    const angle=(360/petalCount)*i;
    wrap.style.transform=`rotate(${angle}deg)`;
    const petal=document.createElement('div');
    petal.classList.add('petal');
    petal.style.animationDelay=`${0.4+i*0.12}s`;
    wrap.appendChild(petal);
    flower.appendChild(wrap);
  }
}

// Hi·ªáu ·ª©ng ch·ªØ
function animateText(){
  let totalDelay=4;
  lines.forEach(line=>{
    const content=line.textContent.trim();
    line.textContent='';
    Array.from(content).forEach((char,i)=>{
      const span=document.createElement('span');
      span.textContent=char===' ' ? '\u00A0' : char;
      span.style.opacity=0;
      span.style.display='inline-block';
      span.style.animation=`fadeChar 0.5s ease forwards`;
      span.style.animationDelay=`${totalDelay+i*0.1}s`;
      line.appendChild(span);
    });
    totalDelay+=content.length*0.1+0.5;
  });
  setTimeout(()=>{text.classList.add('glow');},totalDelay*1000);
}

// Reset c·∫£nh
function resetScene(){
  proposal.style.display='none';
  responseMessage.textContent='';
  agreeBtn.style.display='inline-block';
  disagreeBtn.style.display='inline-block';
  
  // X√≥a c√°nh hoa c≈©
  document.querySelectorAll('.petal-wrap').forEach(p=>p.remove());
  
  createPetals();
  
  // Reset ch·ªØ
  text.classList.remove('glow');
  lines.forEach(line=>{
    const content = Array.from(line.querySelectorAll('span')).map(s=>s.textContent).join('');
    line.textContent = '';
    Array.from(content).forEach((char,i)=>{
      const span=document.createElement('span');
      span.textContent=char===' ' ? '\u00A0' : char;
      span.style.opacity=0;
      span.style.display='inline-block';
      span.style.animation=`fadeChar 0.5s ease forwards`;
      span.style.animationDelay=`${4+i*0.1}s`;
      line.appendChild(span);
    });
  });
  setTimeout(()=>{text.classList.add('glow');},4000);
}

// T·∫°o hoa l·∫ßn ƒë·∫ßu
createPetals();
animateText();

// Click hoa ƒë·ªÉ m·ªü th∆∞
flower.addEventListener('click',()=>{letter.style.display='block';});

// ƒê√≥ng th∆∞ & n·ª• h√¥n
closeBtn.addEventListener('click',()=>{
  letter.style.display='none';
  const kissCount = 80;
  for(let i=0;i<kissCount;i++){
    const kiss=document.createElement('div');
    kiss.classList.add('kiss');
    kiss.textContent='üíã';
    kiss.style.left=`${Math.random()*100}%`;
    kiss.style.top=`${Math.random()*100}%`;
    const duration = 3 + Math.random()*2;
    const xShift = (Math.random()-0.5)*200;
    const yShift = -window.innerHeight - 50;
    kiss.style.animation = `kissFlyUp ${duration}s forwards`;
    kiss.style.setProperty('--xShift', `${xShift}px`);
    kiss.style.setProperty('--yShift', `${yShift}px`);
    document.body.appendChild(kiss);
    setTimeout(()=>kiss.remove(), duration*1000);
  }
  setTimeout(()=>{proposal.style.display='block';},5000);
});

// N√∫t ƒê·ªìng √Ω / Kh√¥ng ƒë·ªìng √Ω
agreeBtn.addEventListener('click', () => {
  responseMessage.textContent = "üéâ C·∫£m ∆°n em! Anh h·∫°nh ph√∫c l·∫Øm! üíñ";
  agreeBtn.style.display = 'none';
  disagreeBtn.style.display = 'none';
  setTimeout(resetScene,4000);
});

disagreeBtn.addEventListener('click', () => {
  responseMessage.textContent = "üò¢ Anh s·∫Ω ch·ªù em !";
  agreeBtn.style.display = 'none';
  disagreeBtn.style.display = 'none';
  setTimeout(resetScene,4000);
});
</script>
</body>
</html>
